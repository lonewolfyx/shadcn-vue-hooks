---
title: useForm
description: useForm is a powerful hook for form state management with built-in persistence, encryption, and nested path support.
---

`useForm` simplifies complex form handling by providing reactive state management, automatic persistence (localStorage/sessionStorage), data encryption, and type-safe nested field access.

- **State Management**: Reactive form object with deep reactivity.
- **Persistence**: Automatically save and restore form state from storage.
- **Encryption**: Securely encrypt cached data to prevent plain text exposure.
- **Nested Paths**: Access and update deeply nested fields using dot notation (e.g., `user.profile.name`).
- **Reset**: Easily reset the form to its initial state.

## Installation

```bash
npx shadcn-vue@latest add @shadcn-vue-hooks/useForm
```

## Usage

### Basic Example

```ts
import { useForm } from '@/registry/composables/useForm'

const { form, reset, persist } = useForm({
  username: '',
  email: '',
  profile: {
    age: 18
  }
})

// Update form directly
form.username = 'johndoe'

// Or use methods
reset() // Reset to initial values
persist() // Manually save to storage
```

### With Persistence & Encryption

Enable `cache` to automatically restore data on mount and save on unmount (if `autoPersist` is true).

```ts
const { form } = useForm(
  { 
    settings: { theme: 'dark', notifications: true } 
  },
  {
    cache: true,
    storage: 'local', // 'local' or 'session'
    secret: 'my-secret-key', // Encryption key
    autoPersist: true // Auto save on unmount
  }
)
```

### Accessing Nested Fields

```ts
const { setFieldValue, getFieldValue } = useForm({
  user: {
    details: {
      address: {
        city: 'New York'
      }
    }
  }
})

// Type-safe path access
setFieldValue('user.details.address.city', 'London')
const city = getFieldValue('user.details.address.city')
```

## API

### Parameters

1. `initialValues`: Initial state object.
2. `options` (optional):
    - `cache`: `boolean` (default: `true`) - Enable storage persistence.
    - `storage`: `'session' | 'local'` (default: `'session'`) - Storage type.
    - `secret`: `string` - Key for encryption.
    - `autoPersist`: `boolean` (default: `true`) - Save state on component unmount.

### Return Values

- `form`: The reactive form object.
- `reset()`: Resets form to initial values.
- `setFieldValue(path, value)`: Sets a specific field value.
- `getFieldValue(path)`: Gets a specific field value.
- `setFieldsValue(values)`: Updates multiple fields (deep merge).
- `persist()`: Manually saves current state to storage.
- `clearCache()`: Clears the stored data.

## Source Code

::ShowCode{file="composables/useForm.ts"}
::
